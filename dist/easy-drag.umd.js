(function(s,i){typeof exports=="object"&&typeof module!="undefined"?module.exports=i():typeof define=="function"&&define.amd?define(i):(s=typeof globalThis!="undefined"?globalThis:s||self,s["easy-drag"]=i())})(this,function(){"use strict";const s=(e,n)=>{const o=e[0]+n[0],t=e[1]+n[1];return[o,t]},i=(e,n)=>{const o=n[0]-e[0],t=n[1]-e[1];return[o,t]},b=(e,n)=>{let o=e[0],t=e[1];return o=Math.max(o,n[2]),o=Math.min(o,n[3]),t=Math.max(t,n[0]),t=Math.min(t,n[1]),[o,t]},w=(e,n)=>`translate3d(${n[0]}px, ${n[1]}px, 0px) ${e.replace("none","")}`,p=e=>{if(e instanceof MouseEvent)return[e.pageX,e.pageY];const n=e.touches[0];return[n.pageX,n.pageY]},h=()=>/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(navigator.userAgent);return(e,n)=>{let{outerElement:o,innerElement:t,onDragStart:M,onDrag:E,onDragEnd:y}=n!=null?n:{},x=window.getComputedStyle(e).transform,d=null,L=null,c=null,a=[0,0],m=[0,0];o=o!=null?o:document.body,e=e,t=t!=null?t:e;const f=u=>{if(u.stopPropagation(),d=p(u),o&&e&&t){const r=o.getBoundingClientRect(),v=e.getBoundingClientRect();c=[r.top-v.top,r.bottom-v.bottom,r.left-v.left,r.right-v.right]}typeof M=="function"&&M(a)},l=u=>{if(d&&c){L=p(u);const r=b(i(d,L),c);m=s(a,r),e.style.transform=w(x,m),typeof E=="function"&&E(m)}},g=u=>{d&&c&&(a=m,typeof y=="function"&&y(a)),d=null},P=()=>{if(t){if(h()){t.addEventListener("touchstart",f),document.addEventListener("touchmove",l),document.addEventListener("touchend",g);return}t.addEventListener("mousedown",f),document.addEventListener("mousemove",l),document.addEventListener("mouseup",g)}},B=()=>{if(t){if(h()){t.removeEventListener("touchstart",f),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",g);return}t.removeEventListener("mousedown",f),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",g)}};return P(),B}});
